<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>

</body>

</html>
<script>
    var str = '<p style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin-top: 16px; margin-bottom: 16px; padding: 0px; color: rgb(34, 34, 34); font-family: &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);">时值初夏，生活在农村的人最幸福，没有城市的热岛效应，还能吃到很多城里人想吃都吃不到的菜，例如云龙菜。</p><p><img src="http://p1.pstatp.com/large/pgc-image/15274779929166bc144e291" alt="这菜过了夏天吃不到，5月份最好吃，纯天然无污染，再贵也要吃"/></p><p class="pgc-img-caption" style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin-top: 0px; margin-bottom: 0px; padding: 0px; text-align: center; font-size: 12px; color: rgb(119, 119, 119); line-height: 16px;"><br/></p><h1 style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin-top: 16px; margin-bottom: 16px; padding: 0px; color: rgb(34, 34, 34); font-family: &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);">云龙菜是一种长得像蕨菜的野菜，国人吃云龙菜由来已久，《诗经·召南》中就有记载：“陟彼南山，言采其云龙菜。，云龙菜十分罕见，对生存坏境的要求极为严格，生长在海拔2500米的高山中，在云贵高原比较常见。因其生长环境终年云雾环绕，古木参天，冬暖夏凉远离城市的喧嚣和污染，云龙菜吸收也被称作吸收天地灵气，汇聚日月精华的<span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; font-weight: 700;">“山野菜之王”</span></h1><p><img src="http://p3.pstatp.com/large/pgc-image/1527477993125a3a1cd5e41" alt="这菜过了夏天吃不到，5月份最好吃，纯天然无污染，再贵也要吃"/></p><p class="pgc-img-caption" style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin-top: 0px; margin-bottom: 0px; padding: 0px; text-align: center; font-size: 12px; color: rgb(119, 119, 119); line-height: 16px;"><br/></p><p style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin-top: 16px; margin-bottom: 16px; padding: 0px; color: rgb(34, 34, 34); font-family: &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);">海拔2500米，年降雨量为3000毫米</p><p><img src="http://p3.pstatp.com/large/pgc-image/1527477993214ef3011d4d7" alt="这菜过了夏天吃不到，5月份最好吃，纯天然无污染，再贵也要吃"/></p><p class="pgc-img-caption" style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin-top: 0px; margin-bottom: 0px; padding: 0px; text-align: center; font-size: 12px; color: rgb(119, 119, 119); line-height: 16px;"><br/></p><p style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin-top: 16px; margin-bottom: 16px; padding: 0px; color: rgb(34, 34, 34); font-family: &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);">夏无酷暑，冬无严寒的深山</p><p><img src="http://p1.pstatp.com/large/pgc-image/1527477993626dee5bce2de" alt="这菜过了夏天吃不到，5月份最好吃，纯天然无污染，再贵也要吃"/></p><p class="pgc-img-caption" style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin-top: 0px; margin-bottom: 0px; padding: 0px; text-align: center; font-size: 12px; color: rgb(119, 119, 119); line-height: 16px;"><br/></p><p style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin-top: 16px; margin-bottom: 16px; padding: 0px; color: rgb(34, 34, 34); font-family: &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);">每年的这个时节，云龙菜出产之季，人们都会结伴上山采摘这道“山珍”，云龙菜因其对生长坏境的严苛，现阶段无法人工种植纯野生纯天然的云龙菜，甚至有人拿长的像云龙菜的蕨菜来以次充好，但云龙菜的生长环境决定了它的营养价值，它含有其他野菜所没有的硒、锶、钼等人体所需微量原素还含有还含有18种氨基酸、胡萝卜素、维生素、蛋白质蕨素， 长期食用云龙菜对防癌抗瘤、降血脂、平衡血压、清洁肠道、美容养颜等有明显的防治和保健作用，是当之无愧的“山野菜之王”</p><p><img src="http://p3.pstatp.com/large/pgc-image/1527477993679186dfb39a3" alt="这菜过了夏天吃不到，5月份最好吃，纯天然无污染，再贵也要吃"/></p><p class="pgc-img-caption" style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin-top: 0px; margin-bottom: 0px; padding: 0px; text-align: center; font-size: 12px; color: rgb(119, 119, 119); line-height: 16px;"><br/></p><p style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin-top: 16px; margin-bottom: 16px; padding: 0px; color: rgb(34, 34, 34); font-family: &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);">云龙菜主要有清热解毒、杀菌消炎、下气降压、止泻利尿、强身健体等功效。民间常用云龙菜治疗泄泻痢疾及小便淋漓不通等疾病，现在科学表明云龙菜还有，增强抗病能力、抗癌的功效。</p><p style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin-top: 16px; margin-bottom: 16px; padding: 0px; color: rgb(34, 34, 34); font-family: &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);">云龙菜吃法多样，常见的有清炒，凉拌，煲汤等做法，其中煲汤营养最丰富。</p><p style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin-top: 16px; margin-bottom: 16px; padding: 0px; color: rgb(34, 34, 34); font-family: &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);">一、清炒云龙菜</p><p style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin-top: 16px; margin-bottom: 16px; padding: 0px; color: rgb(34, 34, 34); font-family: &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);">1、首相将云龙菜放入沸水中焯一下，过冷水。</p><p style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin-top: 16px; margin-bottom: 16px; padding: 0px; color: rgb(34, 34, 34); font-family: &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);">2、在锅里热油迅速将云龙菜放入锅中翻炒，放入少许的彩椒翻炒</p><p style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin-top: 16px; margin-bottom: 16px; padding: 0px; color: rgb(34, 34, 34); font-family: &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);">3、翻炒片刻加入盐，味精等调味料翻炒，迅速出锅。</p><p><img src="http://p3.pstatp.com/large/pgc-image/152747799328552155b2418" alt="这菜过了夏天吃不到，5月份最好吃，纯天然无污染，再贵也要吃"/></p><p class="pgc-img-caption" style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin-top: 0px; margin-bottom: 0px; padding: 0px; text-align: center; font-size: 12px; color: rgb(119, 119, 119); line-height: 16px;"><br/></p><p style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin-top: 16px; margin-bottom: 16px; padding: 0px; color: rgb(34, 34, 34); font-family: &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);">二、云龙菜炒香干</p><p style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin-top: 16px; margin-bottom: 16px; padding: 0px; color: rgb(34, 34, 34); font-family: &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);">1、将云龙菜洗干净放入热水中焯一下捞出过冷水备用，</p><p style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin-top: 16px; margin-bottom: 16px; padding: 0px; color: rgb(34, 34, 34); font-family: &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);">2、将香干切成和云龙菜相同大小的丝，在锅里热用，放入葱段炒香再放入切好的香干、云龙菜迅速翻炒</p><p style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin-top: 16px; margin-bottom: 16px; padding: 0px; color: rgb(34, 34, 34); font-family: &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);">3、放入少许食、味精、生炒、高汤煸炒片刻即可出锅。（野菜保留其本才是最好的吃法，烹饪手法简单，不用放太多的调味料）</p><p><img src="http://p3.pstatp.com/large/pgc-image/1527477993408e5a856119a" alt="这菜过了夏天吃不到，5月份最好吃，纯天然无污染，再贵也要吃"/></p><p class="pgc-img-caption" style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin-top: 0px; margin-bottom: 0px; padding: 0px; text-align: center; font-size: 12px; color: rgb(119, 119, 119); line-height: 16px;"><br/></p><p style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin-top: 16px; margin-bottom: 16px; padding: 0px; color: rgb(34, 34, 34); font-family: &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);">三、云龙菜汤</p><p style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin-top: 16px; margin-bottom: 16px; padding: 0px; color: rgb(34, 34, 34); font-family: &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);">1、将云龙菜焯水捞出备用，将海鲜菇切成丝焯水备用</p><p style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin-top: 16px; margin-bottom: 16px; padding: 0px; color: rgb(34, 34, 34); font-family: &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);">2、在锅里放入葱段煸香，将焯水的云龙菜和海鲜菇一起放入锅中翻炒</p><p style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin-top: 16px; margin-bottom: 16px; padding: 0px; color: rgb(34, 34, 34); font-family: &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);">3、同时放入清汤上火煮沸，入盐、味精、葱、姜末煮20分钟，淋上香油即成。</p><p><img src="http://p9.pstatp.com/large/pgc-image/15274779932505f54e81582" alt="这菜过了夏天吃不到，5月份最好吃，纯天然无污染，再贵也要吃"/></p><p class="pgc-img-caption" style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin-top: 0px; margin-bottom: 0px; padding: 0px; text-align: center; font-size: 12px; color: rgb(119, 119, 119); line-height: 16px;"><br/></p><p style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin-top: 16px; margin-bottom: 16px; padding: 0px; color: rgb(34, 34, 34); font-family: &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);">食用云龙菜有清洁肠道、平衡血脂、防癌抗瘤、美容养颜的强大养生功效。这个季节是吃云龙菜最好的季节，错过现在就要等到明年啦，大家快把这些做法学起来。</p><p><br/></p>';

    const oElement = document.createElement('div');

    oElement.innerHTML = str;

    // for(var i=0; i<oElement.childNodes.length; i++) {
    //     console.log(oElement.childNodes[i]);
    // }
    // oElement.childNodes[0].nodeType 3 文本 1 元素
    // 我要提取出来 写一个函数

    var arr = virtualDom(oElement);
    console.log(arr);

    function virtualDom(element) {
        let childNodes = element.childNodes;
        let len = childNodes.length;
        let arr = [];

        for (let i = 0; i < len; i++) {
           
            // 该子元素为文本类型
            if (!childNodes[i].childNodes.length) {
                if (/^IMG/.test(childNodes[i].nodeName)) {
                    const src = childNodes[i].src;
                    if (src) {
                        arr.push({ type: 'image', src });
                    }
                }
                else if (childNodes[i].nodeType == 3) {
                    const text = childNodes[i].wholeText.trim();
                    if (text && !/\r|\n/.test(text)) {
                        let type = 'view';
                        if(/^H/.test(childNodes[i].parentNode.nodeName)) {
                            type = 'title'
                        }
                        arr.push({ type, text })
                    }
                }
            }
            else if (childNodes[i].childNodes.length == 1) {
                if (/^IMG/.test(childNodes[i].childNodes[0].nodeName)) {
                    const src = childNodes[i].childNodes[0].src;
                    if (src) {
                        arr.push({ type: 'image', src });
                    }
                }
                else {
                    let obj = null;
                    if (/^H/.test(childNodes[i].nodeName)) {
                        // H1~H6
                        const text = childNodes[i].outerText.trim();
                        if (text && !/\r|\n/.test(text)) {
                            obj = { type: 'title', text }
                        }
                    }
                    else {
                        const text = childNodes[i].outerText.trim();
                        if (text && !/\r|\n/.test(text)) {
                            obj = { type: 'view', text }
                        }
                    }
                    if (obj) {
                        arr.push(obj);
                    }
                }
            }
            else {
                arr = arr.concat(virtualDom(childNodes[i]))
            }
        }
        return arr;
    }



</script>